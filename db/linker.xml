<?xml version="1.0" ?>
<gprconfig>

  <!--  This configuration shows how to link a multi language
        application with GNAT and either GCC or toolchains
        derived from gcc -->


  <!--  Archiver.  -->
  <configuration>
    <targets>
      <target name="powerpc-elf" />
    </targets>
    <config>
   for Archive_Builder  use ("powerpc-elf-ar", "cr");
   for Archive_Builder_Append_Option use ("q");
   for Archive_Indexer  use ("powerpc-elf-ranlib");
   for Archive_Suffix   use ".a";
    </config>
  </configuration>

  <configuration>
    <targets>
      <target name="powerpc-eabispe" />
    </targets>
    <config>
   for Archive_Builder  use ("powerpc-eabispe-ar", "cr");
   for Archive_Builder_Append_Option use ("q");
   for Archive_Indexer  use ("powerpc-eabispe-ranlib");
   for Archive_Suffix   use ".a";
    </config>
  </configuration>

  <configuration>
    <targets>
      <target name="erc32-elf" />
    </targets>
    <config>
   for Archive_Builder  use ("erc32-elf-ar", "cr");
   for Archive_Builder_Append_Option use ("q");
   for Archive_Indexer  use ("erc32-elf-ranlib");
   for Archive_Suffix   use ".a";
    </config>
  </configuration>

  <configuration>
    <targets>
      <target name="leon-elf" />
    </targets>
    <config>
   for Archive_Builder  use ("leon-elf-ar", "cr");
   for Archive_Builder_Append_Option use ("q");
   for Archive_Indexer  use ("leon-elf-ranlib");
   for Archive_Suffix   use ".a";
    </config>
  </configuration>

  <configuration>
    <targets negate="true">
      <target name=".*-wrs-vxworks.*" />
      <target name="powerpc-elf"/>
      <target name="powerpc-eabispe"/>
      <target name="erc32-elf"/>
      <target name="leon-elf"/>
    </targets>
    <config>
   for Archive_Builder  use ("ar", "cr");
   for Archive_Indexer  use ("ranlib");
   for Archive_Suffix   use ".a";
    </config>
  </configuration>

  <!--  Systems with no support for libraries at all -->
  <configuration>
    <targets>
       <target name=".*unknown.*" />
    </targets>
    <compilers><compiler name="GNAT" /></compilers>
    <config>
   for Library_Support  use "none";
    </config>
  </configuration>

  <!--  Systems with no support for shared libraries, but with static libraries -->
  <configuration>
    <targets>
       <target name=".*aix.*" />
       <target name=".*lynxos.*" />
       <target name="powerpc-elf" />
       <target name="powerpc-eabispe" />
       <target name="erc32-elf" />
       <target name="leon-elf" />
    </targets>
    <compilers><compiler name="GNAT" /></compilers>
    <config>
   for Library_Support  use "static_only";
   for Library_Builder  use "${GPRCONFIG_PREFIX}/libexec/gprbuild/gprlib";
    </config>
  </configuration>

  <!--  Darwin -->
  <configuration>
    <targets>
       <target name=".*darwin.*" />
    </targets>
    <config>
   for Library_Support use "full";
   for Shared_Library_Prefix use "lib";
   for Symbolic_Link_Supported use "true";
   for Library_Major_Minor_Id_Supported use "true";

   for Shared_Library_Suffix use ".dylib";
   for Archive_Indexer use project'Archive_Indexer &amp; ("-c");
   for Shared_Library_Minimum_Switches use
         ("-dynamiclib", "-Wl,-flat_namespace", "-shared-libgcc");
    </config>
  </configuration>

  <!--  HPUX -->
  <configuration>
    <targets>
       <target name=".*hpux.*" />
    </targets>
    <config>
   for Library_Builder  use "${GPRCONFIG_PREFIX}/libexec/gprbuild/gprlib";
   for Library_Support  use "full";
   for Shared_Library_Prefix use "lib";
   for Symbolic_Link_Supported use "true";
   for Library_Major_Minor_Id_Supported use "true";
   for Shared_Library_Minimum_Switches use ("-shared", "-fPIC");
   for Library_Version_Switches use ("-Wl,-soname,");

   for Shared_Library_Suffix use ".sl";
   for Run_Path_Option  use ("-Wl,+b,");
    </config>
  </configuration>

  <!-- linux and Irix-->
  <configuration>
    <targets>
       <target name=".*linux.*" />
       <target name=".*irix.*" />
    </targets>
    <config>
   for Library_Builder  use "${GPRCONFIG_PREFIX}/libexec/gprbuild/gprlib";
   for Library_Support  use "full";
   for Shared_Library_Prefix use "lib";
   for Symbolic_Link_Supported use "true";
   for Library_Major_Minor_Id_Supported use "true";
   for Shared_Library_Minimum_Switches use ("-shared");
   for Library_Version_Switches use ("-Wl,-soname,");

   for Shared_Library_Suffix use ".so";
   for Library_Auto_Init_Supported use "true";
   for Run_Path_Option  use ("-Wl,-rpath,");
    </config>
  </configuration>

  <!-- linux -->
  <configuration>
    <targets>
       <target name=".*linux.*" />
    </targets>
    <config>
   for Library_Partial_Linker use ("gcc", "-nostdlib", "-Wl,-r", "-o");
    </config>
    <!--  ??? Static SALs are not supported on Irix -->
  </configuration> 

  <!--  Solaris -->
  <configuration>
    <targets>
       <target name=".*sunos.*" />
       <target name=".*solaris.*"/>
    </targets>
    <config>
   for Library_Builder  use "${GPRCONFIG_PREFIX}/libexec/gprbuild/gprlib";
   for Library_Support  use "full";
   for Shared_Library_Prefix use "lib";
   for Symbolic_Link_Supported use "true";
   for Library_Major_Minor_Id_Supported use "true";
   for Shared_Library_Minimum_Switches use ("-shared");

   for Library_Version_Switches use ("-Wl,-h,");

   for Shared_Library_Suffix use ".so";
   for Library_Auto_Init_Supported use "true";
   for Run_Path_Option  use ("-Wl,-R,");
   for Library_Partial_Linker use ("gcc", "-nostdlib", "-Wl,-r", "-o");
    </config>
  </configuration>

  <!--  Windows -->
  <configuration>
    <targets>
      <target name=".*mingw.*" />
    </targets>
    <config>
   for Library_Builder  use "${GPRCONFIG_PREFIX}/libexec/gprbuild/gprlib";
   for Library_Support  use "full";
   for Shared_Library_Prefix use "lib";
   for Symbolic_Link_Supported use "false";
   for Library_Major_Minor_Id_Supported use "false";
   for Shared_Library_Minimum_Switches use ("-shared");
   for Library_Version_Switches use ("-Wl,-soname,");
   for Shared_Library_Suffix use ".dll";
   for Library_Auto_Init_Supported use "true";
    </config>
  </configuration>

  <!-- Tru64-->
  <configuration>
    <targets>
       <target name=".*osf.*" />
    </targets>
    <config>
   for Library_Builder  use "${GPRCONFIG_PREFIX}/libexec/gprbuild/gprlib";
   for Library_Support  use "full";
   for Shared_Library_Prefix use "lib";
   for Symbolic_Link_Supported use "true";
   for Library_Major_Minor_Id_Supported use "true";
   for Shared_Library_Minimum_Switches use
      ("-shared", "-Wl,-expect_unresolved,*");
   for Library_Version_Switches use ("-Wl,-soname,");

   for Shared_Library_Suffix use ".so";
   for Library_Auto_Init_Supported use "true";
   for Run_Path_Option  use ("-Wl,-rpath,");
    </config>
  </configuration>

  <!--  VMS -->
  <configuration>
    <targets>
      <target name=".*vms.*" />
    </targets>
    <compilers><compiler name="GNAT" /></compilers>
    <config>
   for Library_Builder  use "${GPRCONFIG_PREFIX}/libexec/gprbuild/gprlib";
   for Library_Support  use "full";
   for Shared_Library_Prefix use "lib";
   for Shared_Library_Suffix use ".exe";
   for Symbolic_Link_Supported use "false";
   for Library_Major_Minor_Id_Supported use "false";
   for Shared_Library_Minimum_Switches use ("-shared", "-shared-libgcc");
   for Library_Auto_Init_Supported use "true";
    </config>
  </configuration>

  <!--  Cygming -->
  <configuration>
    <compilers><compiler name="GCC-CYGMING"/></compilers>
    <config>
   package Linker is
       for Required_Switches use ("-mno-cygwin");
   end Linker;
    </config>
  </configuration>

  <!--  use C++,Fortran, Ada or C driver to link in this order      -->

  <configuration>
    <compilers>
       <compiler language="C++" />
    </compilers>
    <config>
   package Linker is
      for Driver use Compiler'Driver ("C++");
   end Linker;
    </config>
  </configuration>

  <configuration>
    <compilers negate="true">
       <compiler language="C++" />
    </compilers>
    <compilers>
       <compiler language="Fortran" />
    </compilers>
    <config>
   package Linker is
      for Driver use Compiler'Driver ("Fortran");
   end Linker;
    </config>
  </configuration>

  <configuration>
    <compilers negate="true">
       <compiler language="C++" />
       <compiler language="Fortran" />
    </compilers>
    <compilers>
       <compiler language="Ada" /></compilers>
    <config>
   package Linker is
      for Driver use Compiler'Driver ("Ada");
   end Linker;
    </config>
  </configuration>
  <configuration>
    <compilers negate="true">
       <compiler language="C++" />
       <compiler language="Fortran" />
       <compiler language="Ada" />
    </compilers>
    <compilers>
       <compiler language="C" />
    </compilers>
    <config>
   package Linker is
      for Driver use Compiler'Driver ("C");
   end Linker;
    </config>
  </configuration>

 <!-- Default language is Ada, C, Fortran, C++ in that order -->

  <configuration>
    <compilers>
       <compiler language="Ada" />
    </compilers>
    <config>
   for Default_Language use "Ada";
    </config>
  </configuration>

  <configuration>
    <compilers negate="true">
       <compiler language="Ada" />
    </compilers>
    <compilers>
       <compiler language="C" />
    </compilers>
    <config>
   for Default_Language use "C";
    </config>
  </configuration>

  <configuration>
    <compilers negate="true">
       <compiler language="C" />
       <compiler language="Ada" />
    </compilers>
    <compilers>
       <compiler language="Fortran" /></compilers>
    <config>
   for Default_Language use "Fortran";
    </config>
  </configuration>
  <configuration>
    <compilers negate="true">
       <compiler language="C" />
       <compiler language="Fortran" />
       <compiler language="Ada" />
    </compilers>
    <compilers>
       <compiler language="C++" />
    </compilers>
    <config>
   for Default_Language use "C++";
    </config>
  </configuration>

</gprconfig>
