<?xml version="1.0" ?>
<!--
  Knowledge base for configuring GPRBuild and GPR2 projects.
  Copyright (C) 2006-2020, AdaCore

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  As a special exception under Section 7 of GPL version 3, you are
  granted additional permissions described in the GCC Runtime Library
  Exception, version 3.1, as published by the Free Software Foundation.

  You should have received a copy of the GNU General Public License and
  a copy of the GCC Runtime Library Exception along with this program;
  see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see
  <http://www.gnu.org/licenses/>.
-->
<!DOCTYPE gprconfig [
<!ENTITY % env.ent SYSTEM "env.ent"> %env.ent;
<!ENTITY % shortcuts.ent SYSTEM "shortcuts.ent"> %shortcuts.ent;
<!ENTITY % vxworks.ent SYSTEM "vxworks.ent"> %vxworks.ent;
<!ENTITY % vx6.ent SYSTEM "vx6.ent"> %vx6.ent;

<!-- Local target-specific conditions -->

<!ENTITY this_target 'e500v2-wrs-vxworks'>
<!ENTITY this_gnu_wrs_suffix 'ppc'>

<!ENTITY if_these_c_compilers
    '<compilers>
       <compiler name="^GCC_Pro$" />
       <!--  ??? Eventually GCC_Pro will be replaced by a e500v2-vx6-specific
       definition:
       <compiler name="^E500V2-VX6-GCC-ADACORE$" />
       -->
       <compiler name="^E500V2-VX6-GCC-WRS$" />
     </compilers>'>

<!ENTITY if_these_cpp_compilers
    '<compilers>
       <compiler name="^E500V2-VX6-G\+\+-WRS$" />
     </compilers>'>

<!ENTITY if_these_wrs_compilers
    '<compilers>
       <compiler name="^E500V2-VX6-G\+\+-WRS$" />
       <compiler name="^E500V2-VX6-GCC-WRS$" />
       <compiler name="^GCC-WRS6CERTE500V2$" />
       <compiler name="^G\+\+-WRS6CERTE500V2$" />
     </compilers>'>

<!ENTITY if_these_gnu_wrs_compilers
    '<compilers>
       <compiler name="^E500V2-VX6-G\+\+-WRS$" />
       <compiler name="^E500V2-VX6-GCC-WRS$" />
       <compiler name="^GCC-WRS6CERTE500V2$" />
       <compiler name="^G\+\+-WRS6CERTE500V2$" />
     </compilers>'>

<!ENTITY this_wrs_rtp_base '0x40000000'>
<!-- For vx6cert -->

<!ENTITY this_cpu_subdir 'ppc/PPC32/e500v2common'>
]>
<gprconfig>

  &environment;

  <configuration>
     &if_this_target;

     <config>
   for Archive_Builder  use ("e500v2-wrs-vxworks-ar", "cr");
   for Archive_Builder_Append_Option use ("q");
   for Archive_Indexer  use ("e500v2-wrs-vxworks-ranlib");
   for Archive_Suffix   use ".a";
     </config>
  </configuration>

  &configurations_vxworks_gpp;
  &configurations_vx6;

  <!-- e500v2-specific part -->

  <configuration>
     &if_these_wrs_compilers;
     &if_this_target;
     <!-- vx6 and vx6cert -->

     &config_e500v2_cflags;
  </configuration>

</gprconfig>
