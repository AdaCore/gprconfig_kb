   <!ENTITY version_from_wrs_gnu_cc_vx5
    '<version>
      <external>cc${PREFIX} -v</external>
      <grep regexp=".*(tornado 2|VxWorks 5).*" group="1"></grep>
      <must_match>(tornado 2|VxWorks 5)</must_match>
     </version>'
   >

   <!ENTITY version_from_wrs_gnu_cpp_vx5
    '<version>
      <external>c++${PREFIX} -v</external>
      <grep regexp=".*(tornado 2|VxWorks 5).*" group="1"></grep>
      <must_match>(tornado 2|VxWorks 5)</must_match>
     </version>'
   >

   <!ENTITY target_from_wrs_gnu_cc
    '<target>
      <external>cc${PREFIX} -dumpmachine</external>
      <grep regexp="[^\r\n]+"></grep>
     </target>'
   >

   <!ENTITY target_from_wrs_gnu_cpp
    '<target>
      <external>c++${PREFIX} -dumpmachine</external>
      <grep regexp="[^\r\n]+"></grep>
    </target>'
   >

   <!ENTITY config_wind_base
    '<config>
   Wind_Base := external ("WIND_BASE");
   Wind_Usr := external ("WIND_USR", Wind_Base &amp; "/target/usr/");
     </config>'
   >

   <!ENTITY config_mrtp
    '<config>
  package Linker is
     for Required_Switches use
  	Linker &apos; Required_Switches &amp; ("-mrtp");
  end Linker;
    </config>'
   >

   <!ENTITY config_mlongcall_c
     '<config>
   package Compiler is
      case TARGET_C is
         when "arm-wrs-vxworks" =>
           for Leading_Required_Switches ("C") use
             Compiler &apos; Leading_Required_Switches ("C")
             &amp; ("-mlong-calls");

         when "powerpc-wrs-vxworks" =>
           for Leading_Required_Switches ("C") use
             Compiler &apos; Leading_Required_Switches ("C")
             &amp; ("-mlongcall");
        when others =>
           null;
      end case;
   end Compiler;
     </config>'
   >

   <!ENTITY config_mlongcall_cpp
     '<config>
   package Compiler is
      case TARGET_CPP is
         when "arm-wrs-vxworks" =>
           for Leading_Required_Switches ("C++") use
             Compiler &apos; Leading_Required_Switches ("C++")
             &amp; ("-mlong-calls");

         when "powerpc-wrs-vxworks" =>
           for Leading_Required_Switches ("C++") use
             Compiler &apos; Leading_Required_Switches ("C++")
             &amp; ("-mlongcall");

        when others =>
           null;
      end case;
   end Compiler;
     </config>'
   >

  <!ENTITY if_target_gpp
    '<targets>
       <target name="^.*-wrs-vxworks$" />
       <target name="^.*-wrs-vxworks7$" />
     </targets>'>

  <!ENTITY rtp_runtimes
     '<compiler runtime="^rtp$" />
      <compiler runtime="-rtp$" />
      <compiler runtime="^rtp-" />
      <compiler runtime="-rtp-" />'
  >

  <!ENTITY if_rtp
    '<compilers>
      &rtp_runtimes;
     </compilers>'
  >

  <!ENTITY if_not_rtp
    '<compilers negate="true">
      &rtp_runtimes;
     </compilers>'
  >

  <!-- Our naming scheme is such that the name of full rtp runtimes
       start with a "rtp" token -->

  <!ENTITY if_rtp_full
    '<compilers>
       <compiler runtime="^rtp$" />
       <compiler runtime="^rtp-" />
     </compilers>'
  >

  <!-- Our naming scheme is such that the name of full dkm runtimes
       start with a "kernel" token -->

  <!ENTITY if_kernel_full
    '<compilers>
       <compiler runtime="^kernel$" />
       <compiler runtime="^kernel-" />
     </compilers>'
  >

  <!ENTITY if_ada_rtp
    '<compilers>
      <compiler name="GNAT" runtime="^rtp$" />
      <compiler name="GNAT" runtime="-rtp$" />
      <compiler name="GNAT" runtime="^rtp-" />
      <compiler name="GNAT" runtime="-rtp-" />
     </compilers>'
  >

  <!ENTITY config_ada_rtp
    '<config>
   package Compiler is
      for Leading_Required_Switches ("Ada") use
        Compiler &apos; Leading_Required_Switches ("Ada") &amp; ("-mrtp");
   end Compiler;
     </config>'
  >

  <!ENTITY config_e500v2_cflags
    '<config>
   package Compiler is
      for Leading_Required_Switches ("C") use
        Compiler &apos; Leading_Required_Switches ("C")
        &amp; ("-te500v2", "-fno-implicit-fp");

      for Leading_Required_Switches ("C++") use
        Compiler &apos; Leading_Required_Switches ("C++")
        &amp; ("-te500v2", "-fno-implicit-fp");
   end Compiler;
     </config>'
  >

  <!ENTITY config_out_suffix
    '<config>
   package Builder is
      for Executable_Suffix use ".out";
   end Builder;
     </config>'
  >

  <!ENTITY config_vxe_suffix
    '<config>
   package Builder is
      for Executable_Suffix use ".vxe";
   end Builder;
     </config>'
  >

  <!ENTITY configurations_vxworks_gpp
  '
  <!--  Note: vx6 and vx6cert share the same target name, so
   	in configurations chunks are added into vx6-specific
        files if_this_target will match both vx6 and vx6cert.
        A way to discriminate the two kind of platforms is to
	use runtime names and compiler names.

        For now, however, we still have one global target-independant
        compiler for GNAT. So most of the following chuncks apply on
        both vx6 and vx6cert. In order to ease the maintenance,
        have a comment to make it explicit when they apply to both.
   -->

  <configuration>
    &if_rtp_full;
    &if_this_target;
    <!-- vx6, vx7 and vx6cert -->

    &config_vxe_suffix;
  </configuration>

  <configuration>
    &if_not_rtp;
    &if_this_target;
    <!-- vx6, vx7 and vx6cert -->

    &config_out_suffix;
  </configuration>

  <configuration>
    &if_ada_rtp;
    &if_this_target;
    <!-- vx6, vx7 and vx6cert -->

    &config_ada_rtp;
  </configuration>

  <configuration>
    &if_rtp_full;
    &if_this_target;
    <!-- vx6, vx7 and vx6cert -->

    &config_mrtp;
  </configuration>

   <!-- mlongcall is passed by default in the case of GNAT.
        Do the same thing for WRS compilers for consistency.  -->

   <configuration>
     &if_these_gnu_wrs_compilers;
     &if_this_target;
     <!-- vx6 and vx7 -->

     &config_mlongcall_c;
   </configuration>

   <configuration>
     &if_these_cpp_compilers;
     &if_this_target;
     <!-- vx6 and vx7 -->

     &config_mlongcall_cpp;
   </configuration>'
  >
