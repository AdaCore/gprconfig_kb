<?xml version="1.0" ?>
<!--
  Knowledge base for configuring GPRBuild and GPR2 projects.
  Copyright (C) 2006-2020, AdaCore

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  As a special exception under Section 7 of GPL version 3, you are
  granted additional permissions described in the GCC Runtime Library
  Exception, version 3.1, as published by the Free Software Foundation.

  You should have received a copy of the GNU General Public License and
  a copy of the GCC Runtime Library Exception along with this program;
  see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see
  <http://www.gnu.org/licenses/>.
-->
<gprconfig>
   <!--  This package provides the default standard options for a g77
         Fortran compiler -->

   <configuration>
     <compilers>
       <compiler name="^G77$" language="Fortran" />
       <compiler name="^GCC-CYGMING$" language="Fortran" />
     </compilers>
     <config>
   package Compiler is
      for Driver            ("Fortran") use "${PATH(fortran)}g77";
      for Leading_Required_Switches ("Fortran") use
         Compiler'Leading_Required_Switches ("Fortran") &amp;
         ("-c", "-fno-underscoring");
      for Include_Path      ("Fortran") use "CPATH";
   end Compiler;
     </config>
   </configuration>

   <!-- in cygminw mode, make sure that the option -mno-cygwin is used -->

   <configuration>
     <compilers>
       <compiler name="^GCC-CYGMING$" language="Fortran" />
     </compilers>
     <config>
   package Compiler is
      for Leading_Required_Switches ("Fortran") use
      Compiler'Leading_Required_Switches ("Fortran") &amp; ("-mno-cygwin");
   end Compiler;
     </config>
   </configuration>

   <!-- Configuration for GFortran: the GCC fortran 95 compiler -->

   <configuration>
     <compilers>
       <compiler name="^GFORTRAN$" language="Fortran" />
       <compiler name="^GCC-MINGW32$" language="Fortran" />
     </compilers>
     <config>
   package Compiler is
      for Driver            ("Fortran") use "${PATH(fortran)}${PREFIX(fortran)}gfortran";
      for Leading_Required_Switches ("Fortran") use
         Compiler'Leading_Required_Switches ("Fortran") &amp;
         ("-c", "-fno-underscoring");
      for Include_Path      ("Fortran") use "CPATH";
   end Compiler;
     </config>
   </configuration>

   <!--  Additional switches needed on some platforms -->

   <configuration>
     <compilers>
       <compiler name="^G77$" language="Fortran" />
     </compilers>
     <targets negate="true">
       <target name="^.*LynxOS.*$" />
       <target name="^.*pentium-mingw.*$" />
       <target name="^.*cygwin.*$" />
       <target name="^.*dec-osf.*$" />
     </targets>
     <config>
   package Compiler is
      for PIC_Option      ("Fortran") use ("-fPIC");
   end Compiler;
     </config>
   </configuration>
</gprconfig>
